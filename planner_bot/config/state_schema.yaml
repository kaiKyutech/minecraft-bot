# GOAP状態変数の定義
# actions.yamlの前提条件・効果で使用可能な変数を全て定義

# === インベントリ関連 ===
inventory_states:
  # === 動的インベントリ（全アイテムを自動追跡） ===
  inventory:
    type: object
    default: {}
    description: "インベントリ内の全アイテムとその個数を自動追跡（例: {oak_log: 5, iron_ingot: 3}）"
    dynamic: true
    source: "bot.inventory.counts"

  inventory_space:
    type: boolean
    default: true
    description: "インベントリに空きがある"

  # === カテゴリ集約（複数種類のアイテムを合計） ===
  has_log:
    type: number
    default: 0
    description: "所持している原木の合計数（oak_log, birch_log等の合計）"

  has_plank:
    type: number
    default: 0
    description: "所持している板の合計数（oak_planks, birch_planks等の合計）"

  has_cobblestone:
    type: number
    default: 0
    description: "所持している丸石の数"

  # === 個別アイテムは inventory.xxx で参照 ===
  # inventory.crafting_table - 所持しているクラフト台の数
  # inventory.furnace - 所持しているかまどの数
  # 等々...

  # === 個別ツールは削除（inventory.xxx で参照） ===
  # 以前の定義:
  #   has_wooden_pickaxe, has_wooden_axe, has_wooden_sword, has_wooden_shovel, has_wooden_hoe
  #   has_stone_pickaxe, has_stone_axe, has_stone_sword, has_stone_shovel, has_stone_hoe
  # 新しい参照方法:
  #   inventory.wooden_pickaxe, inventory.stone_axe 等のドット記法を使用

  # === ツール所持の複合判定 ===
  has_any_pickaxe:
    type: boolean
    default: false
    description: "任意のピッケル（木・石・鉄・ダイヤ等）を所持している"
    computed: true
    depends_on_inventory: ["wooden_pickaxe", "stone_pickaxe", "iron_pickaxe", "diamond_pickaxe", "netherite_pickaxe"]

  has_any_axe:
    type: boolean
    default: false
    description: "任意の斧（木・石・鉄・ダイヤ等）を所持している"
    computed: true
    depends_on_inventory: ["wooden_axe", "stone_axe", "iron_axe", "diamond_axe", "netherite_axe"]

  has_stone_or_better_pickaxe:
    type: boolean
    default: false
    description: "石以上のピッケル（石・鉄・ダイヤ等）を所持している"
    computed: true
    depends_on_inventory: ["stone_pickaxe", "iron_pickaxe", "diamond_pickaxe", "netherite_pickaxe"]

  has_iron_or_better_pickaxe:
    type: boolean
    default: false
    description: "鉄以上のピッケル（鉄・ダイヤ等）を所持している"
    computed: true
    depends_on_inventory: ["iron_pickaxe", "diamond_pickaxe", "netherite_pickaxe"]

# === 環境・リソース近接関連 ===
environment_states:
  # カテゴリベース近接状態
  nearby_log:
    type: boolean
    default: false
    description: "近くに任意の種類の原木が存在する"
    detection_method: "findBlockCategory"
    category: "log"
    max_distance: 100

  nearby_basic_stone:
    type: boolean
    default: false
    description: "近くに基本的な石が存在する"
    detection_method: "findBlockCategory"
    category: "basic_stone"
    max_distance: 100

  # 個別指定も残しておく（特定の種類が必要な場合）
  nearby_oak_log:
    type: boolean
    default: false
    description: "近くにオーク原木が存在する"
    detection_method: "findBlock"
    block_name: "oak_log"
    max_distance: 100

  nearby_stone:
    type: boolean
    default: false
    description: "近くに石が存在する"
    detection_method: "findBlock"
    block_name: "stone"
    max_distance: 100

  nearby_workbench:
    type: boolean
    default: false
    description: "使用可能距離（5ブロック以内）に作業台が存在する"
    detection_method: "findBlock"
    block_name: "crafting_table"
    max_distance: 5

  visible_workbench:
    type: boolean
    default: false
    description: "視認可能距離（100ブロック以内）に作業台が存在する"
    detection_method: "findBlock"
    block_name: "crafting_table"
    max_distance: 100

  nearby_furnace:
    type: boolean
    default: false
    description: "使用可能距離（5ブロック以内）にかまどが存在する"
    detection_method: "findBlock"
    block_name: "furnace"
    max_distance: 5

  visible_furnace:
    type: boolean
    default: false
    description: "視認可能距離（100ブロック以内）にかまどが存在する"
    detection_method: "findBlock"
    block_name: "furnace"
    max_distance: 100

  nearby_iron_ore:
    type: boolean
    default: false
    description: "採掘可能距離（100ブロック以内）に鉄鉱石が存在する"
    detection_method: "findBlockCategory"
    category: "iron_ore"
    max_distance: 100

  nearby_diamond_ore:
    type: boolean
    default: false
    description: "採掘可能距離（100ブロック以内）にダイヤモンド鉱石が存在する"
    detection_method: "findBlockCategory"
    category: "diamond_ore"
    max_distance: 100

  nearby_coal_ore:
    type: boolean
    default: false
    description: "採掘可能距離（100ブロック以内）に石炭鉱石が存在する"
    detection_method: "findBlockCategory"
    category: "coal_ore"
    max_distance: 100

# === 時間・環境条件 ===
world_states:
  is_day:
    type: boolean
    default: true
    description: "昼間である"
